(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/article/article"],{"2ae6":function(t,e,n){"use strict";n.r(e);var o=n("f2ab"),i=n("6f92");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("fdfd");var s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"9459c1fa",null,!1,o["a"],void 0);e["default"]=c.exports},"6f92":function(t,e,n){"use strict";n.r(e);var o=n("71fd"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},"71fd":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("795a"),i=n("5089"),a=n("db2e"),s=n("e4d6"),c=n("b7bf"),r={data:function(){return this.comment_id=0,this.acode="",this.needRefresh=!0,{post:{title:"",views:"",time:"",cats:[],tags:[],switch_comment:0},post_like:0,post_favorite:0,comment_count:0,comments:[],loadding:!1,pullUpOn:!0,loaded:!1,show_comment_submit:!1,comment_content:"",comment_count_change:0,post_id:0,wx_ad_top:void 0,wx_ad_bottom:void 0,pre_next:void 0,pre:void 0,next:void 0,article:"",official:!1,like_list:[],placeholder:"",isShowPainter:!1,painterImage:"",base:void 0}},components:{JiangqieLoadmore:function(){n.e("components/loadmore/loadmore").then(function(){return resolve(n("5d6a"))}.bind(null,n)).catch(n.oe)},jiangqieNomore:function(){n.e("components/nomore/nomore").then(function(){return resolve(n("b376"))}.bind(null,n)).catch(n.oe)},JiangqieNoData:function(){n.e("components/nodata/nodata").then(function(){return resolve(n("77c5"))}.bind(null,n)).catch(n.oe)},lPainter:function(){Promise.all([n.e("common/vendor"),n.e("uni_modules/lime-painter/components/lime-painter/index")]).then(function(){return resolve(n("ead1"))}.bind(null,n)).catch(n.oe)}},onLoad:function(t){t.scene?this.post_id=decodeURIComponent(t.scene):t.post_id&&(this.post_id=t.post_id),this.loadWxacode()},onShow:function(){var e=this;this.needRefresh?(s.get(a.JIANGQIE_POST_DETAIL,{post_id:this.post_id}).then((function(n){t.setNavigationBarTitle({title:n.data.title}),e.post=n.data,e.post_like=n.data.user.islike,e.post_favorite=n.data.user.isfavorite,e.comment_count=Number(n.data.comment_count),e.like_list=n.data.like_list,e.article=n.data.content,e.wx_ad_top=n.data.wx_ad_top,e.wx_ad_bottom=n.data.wx_ad_bottom,e.pre_next=n.data.pre_next,e.pre_next&&(e.pre=n.data.pre,e.next=n.data.next)})),this.loadComments(!0)):this.needRefresh=!0},onReachBottom:function(){this.pullUpOn&&this.loadComments(!1)},onShareAppMessage:function(){return{title:this.post.title,imageUrl:this.post.thumbnail,path:"pages/article/article?post_id="+this.post_id}},onShareTimeline:function(){return{title:this.post.title,query:"post_id="+this.post_id,imageUrl:this.post.thumbnail}},methods:{sharePosterClick:function(){this.painterImage?t.previewImage({urls:[this.painterImage]}):(this.isShowPainter=!0,this.base={width:"750rpx",height:"1334rpx",backgroundColor:"#E6372F",views:[{type:"view",css:{left:"30rpx",top:"234rpx",width:"690rpx",height:"1000rpx",background:"#FFFFFF"}},{type:"text",text:this.post.title,css:{left:"30rpx",top:"120rpx",width:"690rpx",color:"#FFFFFF",fontSize:"38rpx",textAlign:"center",maxLines:1}},{type:"image",src:this.post.thumbnail,mode:"center",css:{left:"30rpx",top:"200rpx",width:"690rpx",height:"520rpx"}},{type:"text",text:this.post.excerpt,css:{left:"70rpx",top:"740rpx",width:"610rpx",color:"#000000",fontSize:"28rpx",maxLines:3}},{type:"image",src:this.acode,mode:"aspectFill",css:{left:"275rpx",top:"920rpx",width:"200rpx",height:"200rpx"}},{type:"text",text:getApp().globalData.appName,css:{left:"30rpx",top:"1170rpx",width:"690rpx",color:"#888888",fontSize:"28rpx",textAlign:"center"}}]})},onPainterSuccess:function(e){this.painterImage=e,t.previewImage({urls:[e]})},wxParseTagATap:function(e){t.setClipboardData({data:e.currentTarget.dataset.src})},handlerTagClick:function(e){var n=e.currentTarget.dataset.id,o=e.currentTarget.dataset.tag;t.navigateTo({url:"/pages/list/list?title="+o+"&tag_id="+n})},jumpBtn:function(){i.navigateBack()},handlerLikeClick:function(t){var e=this;s.get(a.JIANGQIE_USER_LIKE,{post_id:this.post.id}).then((function(t){var n=c.getUser().avatar,o=e.like_list.indexOf(n);o>-1?e.like_list.splice(o,1):e.like_list.unshift(n),e.post_like=1==e.post_like?0:1,e.like_list=e.like_list}))},handlerCommentClick:function(t){this.comment_id=0,this.show_comment_submit=!0},handlerCancelClick:function(t){this.show_comment_submit=!1},handlerCommentSubmit:function(e){var n=this;this.comment_content?s.get(a.JIANGQIE_COMMENT_ADD,{post_id:this.post_id,parent_id:this.comment_id,content:this.comment_content}).then((function(t){n.comment_count_change=n.comment_count_change+(1==t.data.comment_verify?0:1),n.show_comment_submit=!1,n.loadComments(!0)})):t.showToast({icon:"none",title:"请输入内容"})},handlerCommentReplyClick:function(t){this.comment_id=t.currentTarget.dataset.id,this.show_comment_submit=!0},handlerCommentDeleteClick:function(e){var n=this;t.showModal({title:"提示",content:"确定要删除吗？",success:function(t){if(t.confirm){var o=e.currentTarget.dataset.id;s.get(a.JIANGQIE_COMMENT_DELETE,{comment_id:o}).then((function(t){n.comment_count_change=n.comment_count_change-1,n.loadComments(!0)}))}}})},handlerContentInput:function(t){this.comment_content=t.detail.value},handlerFavoriteClick:function(t){var e=this;s.get(a.JIANGQIE_USER_FAVORITE,{post_id:this.post.id}).then((function(t){e.post_favorite=1==e.post_favorite?0:1}))},clickPre:function(){this.pre&&i.openLink("/pages/article/article?post_id="+this.pre)},clickNext:function(){this.next&&i.openLink("/pages/article/article?post_id="+this.next)},loadWxacode:function(){var t=this;s.get(a.JIANGQIE_POST_WX_ACODE,{post_id:this.post_id}).then((function(e){t.acode=e.data}),(function(t){console.log(t)}))},loadQqacode:function(){var t=this;s.get(a.JIANGQIE_POST_QQ_ACODE,{post_id:this.post_id}).then((function(e){t.acode=e.data}),(function(t){console.log(t)}))},loadBdacode:function(){var t=this;s.get(a.JIANGQIE_POST_BD_ACODE,{post_id:this.post_id}).then((function(e){t.acode=e.data}),(function(t){console.log(t)}))},loadComments:function(t){var e=this;this.loadding=!0;var n=0;t||(n=this.comments.length),s.get(a.JIANGQIE_COMMENT_INDEX,{post_id:this.post_id,offset:n}).then((function(n){e.loaded=!0,e.loadding=!1,e.comments=t?n.data:e.comments.concat(n.data),e.pullUpOn=n.data.length>=o.JQ_PER_PAGE_COUNT}))}}};e.default=r}).call(this,n("543d")["default"])},eec6:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("be05");o(n("66fd"));var i=o(n("2ae6"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},f2ab:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,"3603"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,"2a95"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.like_list.length),o=t.__map(t.like_list,(function(e,n){var o=t.__get_orig(e),i=e.length;return{$orig:o,g1:i}})),i=t.comments.length,a=i>0?t.__map(t.comments,(function(e,n){var o=t.__get_orig(e),i=e.user.avatar.length;return{$orig:o,g3:i}})):null,s=t.show_comment_submit?t.comment_content.length:null;t.$mp.data=Object.assign({},{$root:{g0:n,l0:o,g2:i,l1:a,g4:s}})},a=[]},f40a:function(t,e,n){},fdfd:function(t,e,n){"use strict";var o=n("f40a"),i=n.n(o);i.a}},[["eec6","common/runtime","common/vendor"]]]);